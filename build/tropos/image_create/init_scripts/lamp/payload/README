This is the sample payload sent to a php instance when it is created.


Generate a key pair
shh-keygen
name it as wso2-key

Copy the wso2-key and wso2-key.pub to this folder.
Add the  wso2-key.pub into /root/.ssh/authorized_keys file of the PHP Cartridge server machine.
Now ssh to that machine using the wso2-key private key. Copy the entry added to 
the ~/.ssh/known_hosts in the machine from which you accessed the PHP Cartridge server.
Create a file called known_hosts here and copy that entry.

Now pack this payload as payload.zip and pass this when creating PHP instances.
Note that in launch-params file following entries are replaced by information available
at the time of creating the instance.

TENANT
CONTROLLER_IP
APPPATH


Following is the /etc/rc.local file of the php instance

#!/bin/sh -e
/opt/wso2-openstack-init.sh > /var/log/wso2-openstack-init.log
exit 0

By the time rc.local file is invokded in the newly created php instance, the payload is already
passed to the instance and reside in /var/lib/cloud/instance/payload

You can see that rc.local invoke the wso2-openstack-init.sh script in the payload.



