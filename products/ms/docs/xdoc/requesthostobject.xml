<!--
~ Copyright 2005-2008 WSO2, Inc. (http://wso2.com)
~
~ Licensed under the Apache License, Version 2.0 (the "License");
~ you may not use this file except in compliance with the License.
~ You may obtain a copy of the License at
~
~ http://www.apache.org/licenses/LICENSE-2.0
~
~ Unless required by applicable law or agreed to in writing, software
~ distributed under the License is distributed on an "AS IS" BASIS,
~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
~ See the License for the specific language governing permissions and
~ limitations under the License.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
        "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <link href="css/mashup-docs.css" rel="stylesheet" type="text/css" media="all"/>
        <link type="text/css" rel="stylesheet" href="css/SyntaxHighlighter.css" media="all"/>
        <script language="javascript" src="js/shCore.js"></script>
        <script language="javascript" src="js/shBrushJScript.js"></script>
        <script language="javascript" src="js/shBrushJava.js"></script>
        <script language="javascript" src="js/shBrushSql.js"></script>
        <script language="javascript" src="js/shBrushXml.js"></script>
    </head>
    <body>
        <div id="main-content">
            <h1>Request Host Object</h1>
            <h2>1.0 Introduction</h2>
            <p>The 'request' host object provides the ability for users
                to get information regarding the request it received and hence it
                consists of a set of readOnly properties. The request
                object is global and thus does not need to be instantiated explicitly.
                The request host object was introduced in vertion 1.5 of the Mashup
                Server.
            </p>
            <h3>1.1 Example</h3>
            <pre name="code" class="js">
                function securedUsingUTOverHTTPS() {
                    system.log("This mashup was invoked by the following User : " + request.authenticatedUser ); // In order to use this property the mashup should be secured using
                                                                                                                 // scecurity scenario 1 (UsernameToken with Timestamp over HTTPS)
                    system.log("This mashup was invoked from the following IP : " + request.remoteIP );
                    system.log("This mashup was invoked with the following URL : " + request.address );
                }
            </pre>

            <h2>2.0 Request Object</h2>
            <h3>2.1 Request Object Interface</h3>
            <pre name="code" class="js">
                {
                    readonly property string address;
                    readonly property string remoteIP;
                    readonly property string authenticatedUser;
                }
            </pre>
            <h3>2.2 API Documentation</h3>
            <table class="MsoTableGrid" style="margin-left: 0.5in; border-collapse: collapse;" border="1"
                   cellpadding="5" cellspacing="0">
                <tbody>
                    <tr>
                        <td>Member</td>
                        <td>Description</td>
                        <td>Supported in version</td>
                    </tr>


                    <tr>
                        <td>
                            <b>readonly property string address;</b>
                        </td>
                        <td>Returns the URL corresponding to the request a s a String
                            <br/>
                            <em>var requestURL =
                                system.address;
                            </em>
                        </td>
                        <td>1.5</td>
                    </tr>
                    <tr>
                        <td>
                            <b>readonly property string remoteIP;</b>
                        </td>
                        <td>Returns the remoteIP that the request was made from.
                            <br/>
                            <em>var remoteIP =
                                system.remoteIP;
                            </em>
                        </td>
                        <td>1.5</td>
                    </tr>
                    <tr>
                        <td>
                            <b>readonly property string authenticatedUser;</b>
                        </td>
                        <td>Appplicable
                            to Mashups that are secured using scecurity scenario 1 (UsernameToken
                            with Timestamp over HTTPS). This method will return the username of the
                            user who called this mashup.
                            <br/>
                            <span style="font-style: italic;">
                            </span>
                            <em style="font-style: italic;">var</em>
                            <span style="font-style: italic;">authenticatedUser</span>
                            <em style="font-style: italic;">=
                                system.
                            </em>
                            <span style="font-style: italic;">authenticatedUser</span>
                            <em style="font-style: italic;">;</em>
                        </td>
                        <td>1.5</td>
                    </tr>


                </tbody>
            </table>

            <h2>3.0 References</h2>
            <ul>
                <li>
                    <a href="apidocs/org/wso2/mashup/hostobjects/request/Request.html">JavaDoc
                        for the request host Object
                    </a>
                </li>
            </ul>
        </div>
        <script language="javascript">
            dp.SyntaxHighlighter.BloggerMode();
            dp.SyntaxHighlighter.HighlightAll('code');
        </script>
    </body>
</html>
