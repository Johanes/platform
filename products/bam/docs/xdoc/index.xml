<?xml version="1.0" encoding="ISO-8859-1"?>
<document xmlns="http://maven.apache.org/XDOC/2.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/XDOC/2.0 http://maven.apache.org/xsd/xdoc-2.0.xsd">
  	
	<properties>
        <title>Introduction</title>
    </properties>
	
    <head>
        <meta http-equiv="content-type" content="text/html; charset=iso-8859-1"/>
        <link href="css/bam-docs.css" rel="stylesheet"/>
        <link href="styles/dist-docs.css" rel="stylesheet" type="text/css" media="all"/>
    </head>
    <body xml:lang="en">
        <h1>WSO2 Business Activity Monitor </h1>
        <p>
            WSO2 Business Activity Monitor (WSO2 BAM) is a tool designed to exercise 
            Business Activity Monitoring (BAM). WSO2 BAM is intended to serve the needs of  
            both business and IT domain experts to monitor and understand business 
            activities within a SOA deployment. It is specifically designed for monitoring  
            SOA deployments, and can be extended to cater for other general monitoring 
            requirements as well. 
        </p>
        <h2>Introduction</h2>
        <p>
            Business Activity Monitoring
            (BAM) is a term coined by Gartner. The term reflects the interests in the
            strategic concepts of the zero-latency enterprise and straight through
            processing. The gap between when the data are collected and when they are
            available for decision making is defined as latency in this context. Hence,
            zero latency means that data is immediately available. This enables
            organizations to be proactive rather than be reactive. Straight through 
            processing is where inefficient steps like manual entry have been eliminated. 
            WSO2 BAM supports both zero latency as well as straight through processing.  
            Data is collected through push or pull models, automatically, and processed 
            real time, to be made available for business and IT users. 
        </p>
        <p>
            To make more informed and
            better decisions, decision makers need the ability to analyze historical and
            current data and situations. Both business as well as IT domain experts want
            right information at the right time and in the right place to monitor and
            understand business activities. WSO2 BAM enhances the decision making process
            by collecting current data, summarizing those data and making information 
            readily available to help with decision making. While business experts can use 
            those information for fine tuning the business process, IT experts can use  
            those information for optimizing IT operations, capacity planning/provisioning 
            and fine-tuning deployment architectures. 
        </p>
        <h3>Monitoring SOA Deployments</h3>
        <p>
            Users can detect unexpected
            patterns, and act in a proactive manner to deal with emerging situations and be
            agile with the enterprise. In a SOA setup, WSO2 BAM can be used to monitor the
            overall health of the SOA deployment. Given the way SOA bridges the business 
            and IT gap, BAM used on a SOA deployment can result in an efficient organization, 
            where business and IT objectives are aligned with each other. Services deployed  
            with service hosting environments within a SOA, as well as enterprise service 
            bus (ESB) mediation operations could be monitored with WSO2 BAM. 
        </p>
        <p>
            Activity modeling is the first
            step in creating a successful BAM system. This involves finding activities to
            be monitored, as well as the steps associated with activities and metrics tied
            to those steps. When BAM is done on a SOA based system, we can base our
            activity modeling on the SOA design itself. Given that the SOA must have been
            designed with the associated business model in mind, we can take the services
            and operations break down and the respective service invocations models, and
            map those directly to the business activities to be monitored. The service 
            invocation model would be part and parcel of the ESB deployment design, in 
            cases where ESB is deployed in a SOA. Hence, just by monitoring the services  
            and the service invocation model, we can do a comprehensive business activity 
            monitoring on a SOA deployment. 
        </p>
        <h3>Tools for Monitoring</h3>
        <p>
            To help analyze data, both
            real time and historical, WSO2 BAM provides dashboards and associated reports,
            based on various predefined queries on BAM database. To meet the user demands
            for information, BAM provides:
        </p>
        <ul>
            <li>
                Reports on the latest real time summary of
                service data and mediation data, based on the monitoring preferences and
                availability of data
            </li>
            <li>
                Support for analytics on historical service and
                mediation data, summarized over time dimensions
            </li>
            <li>
                Key performance indicators (KPI) based
                monitoring using gadgets and reports
            </li>
        </ul>
        <p>
            For more information on 
            monitoring tools, see <a href="./visualization.html">visualization</a>
        </p>
        <h2>Architecture Overview</h2>
        <p>
            WSO2 Business Activity Monitor encapsulates four main aspects to achieve business activity monitoring capabilities.
        </p>
        <ol>
            <li>
                Data collection
            </li>
            <li>
                Data persistence
            </li>
            <li>
                Data summarization and correlation
            </li>
            <li>
                Business intelligence with visualization tools, including dashboards and reporting
            </li>
        </ol>
        <p>
            The following figure highlights the high level WSO2 BAM architecture. 
        </p>
        <img src="./images/bam-architecture.png" alt="WSO2 BAM Architecture Overview" title="WSO2 BAM Architecture Overview"/>
		
		<h3>Data Collection</h3>
        <p>
            To be able to monitor business activities, we need to collect data from various elements 
            in a SOA. There are two models in collecting data.
        </p>
        <ol>
            <li>
                <h4>Pull model</h4>
                <p>
                    In the pull model, we periodically poll the servers for data. In the current implementation 
                    of WSO2 BAM, we support polling service data from WSO2 Web Services Application Server (WSAS).  
                    The advantage of the pull model is that, there is nothing specific to be done on the sever 
                    hosting services (in other words, the server being monitored). We can point to the statistics 
                    publishing service of WSO2 WSAS and pull data from that into WSO2 BAM server.
                </p>
                <p>
                    The disadvantage of this model is that, the server which 
                    is the source of data must have populated the service statistics module, and if there are any  
                    changes to the service interface of the statistics publishing service interface, then WSO2 
                    BAM would have to update its polling logic.
                </p>
            </li>
            <li>
                <h4>Push model</h4>
                <p>
                    In the push model, data is collected through an eventing API. WSO2 BAM server populates an 
                    eventing API, though which both WSO2 products as well as non WSO2 products can populate  
                    service data into WSO2 BAM. The key advantage of this model is the loose coupling between the 
                    data publisher and the subscriber. Apart form the WS-Eventing based API, there need not be any  
                    other pre-requsites for publishing data. 
                </p>
                <p>
                    The disadvantage of this model is that, there will be 
                    some performance implications on the server being monitored, becuase, in the message flow,  
                    there has to be some handler logic to deal with data collecion, which adds to regular message 
                    processing.
                </p>
            </li>
        </ol>
        <h3>Data Persistence</h3>
        <p>
            WSO2 BAM supports two main categories of data formats.
        </p>
        <ol>
            <li>
                <h4>Service data</h4>
                <p>
                    WSO2 BAM supports collecting service data at server level, service level and operation level. 
                    For each level, the following basic data elements are captured:
                </p>
                <ul>
                    <li>
                        Request counts
                    </li>
                    <li>
                        Response counts
                    </li>
                    <li>
                        Fault counts
                    </li>
                    <li>
                        Average response time
                    </li>
                    <li>
                        Maximum response time
                    </li>
                    <li>
                        Minimum response time
                    </li>
                </ul>
            </li>
            <li>
                <h4>User defined data</h4>
                <p>
                    User defined data is persisted as key/value pairs. The user can defined the key set and store the 
                    values against those keys, along with a time stamp. Hence, over time, multiple values can be  
                    stored against the same key. 
                    WSO2 BAM supports persisting mediation data using the user defined data model. Mediation data is  
                    collected using the push (eventing) model. Data for the three levels, proxy services, endpoints 
                    and sequences are collected and stored as key/value pairs. For each level, the following data 
                    elements are captured.
                </p>
                <ul>
                    <li>
                        Request counts
                    </li>
                    <li>
                        Fault counts
                    </li>
                    <li>
                        Average response time
                    </li>
                    <li>
                        Maximum response time
                    </li>
                    <li>
                        Minimum response time
                    </li>
                </ul>
                <p>
                    The collection of mediation data using the user defined data model serves as a powerful proof 
                    of concept for the ability of WSO2 BAM to be extended to capture any custom data model for  
                    business activity monitoring. For example, we do not have provision for capturing fault reasoning 
                    in the current WSO2 BAM implementation for mediation data. However, combining eventing data  
                    collection model with user defined data persistance model, we can pave the way to capture 
                    fault reasoning when the fault sequence is invoked.
                </p>
            </li>
        </ol>
        <h3>Data Summarization and Correlation</h3>
        <p>
            Data collected from servers and persisted with the data models discussed in previous section are 
            raw data that comes from the servers along the real time line. Over time, WSO2 BAM users would  
            benefit from the ability to summarize data based on time dimensions. To provide analytics 
            capabilities, both service data and mediation data are summarized into the following time dimensions: 
        </p>
        <ul>
            <li>
                Hour
            </li>
            <li>
                Day
            </li>
            <li>
                Month
            </li>
            <li>
                Quarter
            </li>
            <li>
                Year
            </li>
        </ul>
        <p>
            In the current implementation of WSO2 BAM, we have provision for capturing and correlating message 
            level service data. To achieve this, we use an Activity ID, that is inserted into each message  
            that flows between a client and a server. 
            Activity IDs correlate data at SOAP message level. Multiple messages, having the same Activity ID  
            are deemed to be related and their data is tracked, and the invocations correlated. This feature is still 
            experimental, and will be improved in future releases.
        </p>
        <h3>Business Intelligence</h3>
        <p>
            Once both raw data and the summarized data are available, the business users or IT users need to be 
            able to visualize and analyze data to help with their decision making. WSO2 BAM comes with dashboards  
            and reporting capabilities. The main dashboard has the capability to add/configure/remove gadgets. 
            The product is shipped with some pre-designed gadgets. And the user has the option of adding new  
            gadgets, based on user preferences. There are also four pre-defined dashboards that ships with the 
            product, for real time service data, service data analytics based on summary data, real time  
            mediation data and mediation data analytics based on summary data. WSO2 BAM also comes with the 
            ability to generate reports. In the current release, there will be support to generate some static 
            reports based on real time data and summary data. There are plans to support custom reports in the future.
        </p>
		<h3>Example Deployment</h3>
		<p>
			The following figure shows a sample deployment using WSO2 BAM to monitor WSO2 WSAS, WSO2 ESB as well as 
			generic/custom data sources.  
		</p>
		<img src="./images/bam-usecase-01.png" alt="WSO2 BAM Example Deployment" title="WSO2 BAM Example Usecase"/>
    </body>
</document>
