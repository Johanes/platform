<?xml version="1.0" encoding="iso-8859-1"?>
<!--
~ Copyright (c) 2009, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
~
~ WSO2 Inc. licenses this file to you under the Apache License,
~ Version 2.0 (the "License"); you may not use this file except
~ in compliance with the License.
~ You may obtain a copy of the License at
~
~ http://www.apache.org/licenses/LICENSE-2.0
~
~ Unless required by applicable law or agreed to in writing,
~ software distributed under the License is distributed on an
~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
~ KIND, either express or implied. See the License for the
~ specific language governing permissions and limitations
~ under the License.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=iso-8859-1"/>
        <title>WSO2 MB Samples - How to use AWS JAVA SDK as SQS client with MB</title>
        <link href="../css/mb-docs.css" rel="stylesheet"/>
        <link href="../styles/dist-docs.css" rel="stylesheet" type="text/css"
              media="all"/>
    </head>

    <body>
        <p>[<a href="../docs_index.html">Documentation Index</a>]
            <h1>WSO2 MB - Samples : How to use AWS JAVA SDK as SQS client with MB</h1>

            <p>This guide demonstrates how AWS SDK for SQS can be used as it is for supporting SQS
                in WSO2 Message Broker.
            </p>
            <p>WSO2 Message Broker supports latest Amazon Simple Queue Service (API Version
                2009-02-01). SQS clients using API Version 2009-02-01 can be used with WSO2 Message
                Broker. There are two kind of SQS clients namely SOAP request based clients and REST
                request based clients. We will consider REST based client first.
            </p>

            <h2>Contents</h2>

            <div class="toc">
                <ul>
                    <li>
                        <a href="#mb_with_aws_sdk">Invoking SQS service in MB by AWS SDK</a>
                    </li>
                    <li>
                        <a href="#References">References</a>
                    </li>
                </ul>
            </div>

            <h2 id="mb_with_aws_sdk">Invoking SQS service in MB by AWS SDK</h2>


            <p>
                AWS provides a AWS SDK for Java including SQS, you can download it from [1].
                More details on AWS SDK can be found at [2]. we will use aws-java-sdk-1.1.8 in this
                sample.

            </p>
            <p>
                To start with SQS, you need to have two keys namely Access Key ID (for
                example: 44b59c52fc336f1d57d4) and Secret Access Key (for example:
                6f1d57d425a077b579f4440e95cc8d8b384375d8). These keys can be obtained once you log
                into Message Broker admin console and under Manage menu > MessageBoxes/SQS > Access
                keys.
            </p>

            <p>We can set these keys in AwsCredentials.properties file in AWS SDK. AWS SDK supports
                many AWS services, so you have to find AmazonSimpleQueueService under sample folder
                in AWS SDK unzipped folder.
            </p>

            <P>You can use SimpleQueueServiceSample.java with following change in service end
                point.
            </P>
            <pre xml:space="preserve">
                AmazonSQS sqs = new AmazonSQSClient(new PropertiesCredentials(
                SimpleQueueServiceSample.class.getResourceAsStream("AwsCredentials.properties")));

                sqs.setEndpoint("http://localhost:9763/services/QueueService");
            </pre>

            <p>
                You can run and see the results in AWS SDK console, If you are getting any errors,
                please check if the access keys and secret access keys have been properly set in
                AwsCredentials.properties file.
            </p>

            <h2 id="References">References</h2>
            <ul>
                <li>
                    <a href="http://aws.amazon.com/sdkforjava/">[1].AWS SDK for Java</a>
                </li>
                <li>
                    <a href="http://aws.amazon.com/articles/3586">[2].More Details on AWS SDK</a>
                </li>
            </ul>
        </p>
    </body>
</html>