<analyzerSequence name="FaultDetector">
   <trigger cron="1 * * * * ? *"/>
   <analyzers>
      <get name="BASE" batchSize="3">
         <where index="ActivityIndex">
            <range column="timestamp" start="" end=""/>
         </where>
      </get>
      <groupBy>
         <field name="bam_activity_id"/>
      </groupBy>
      <orderBy field="timestamp"/>
      <detectFault errorFields="bam_error_code,bam_error_message" currentSequenceIdentifier="bam_current_sequence"/>
      <log/>
      <alert to="TO_MAIL_ADDRESS" transport="smtps" subject="Fault notification" from="no-reply@wso2.org" mailhost="smtp.gmail.com" username="synapse.demo.0@gmail.com" password="mailpassword">
         <fields>bam_activity_id,operation_name,service_name,timestamp,faultCode,faultReason,bam_message_path</fields>
      </alert>
   </analyzers>
</analyzerSequence>
