<?xml version="1.0" encoding="ISO-8859-1"?>

<!--
  ~  Copyright (c) 2005-2008, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
  ~
  ~  WSO2 Inc. licenses this file to you under the Apache License,
  ~  Version 2.0 (the "License"); you may not use this file except
  ~  in compliance with the License.
  ~  You may obtain a copy of the License at
  ~
  ~    http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~  Unless required by applicable law or agreed to in writing,
  ~  software distributed under the License is distributed on an
  ~  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~  KIND, either express or implied.  See the License for the
  ~  specific language governing permissions and limitations
  ~  under the License.
  ~
  -->

<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.1//EN"
   "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd" >

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title> WSO2 Governance Registry - User Guide </title>
<link href="../css/greg-docs.css" rel="stylesheet"/>
<link href="../styles/dist-docs.css" rel="stylesheet" type="text/css" media="all"/>
</head>
<body>
[ <a href="../docs_index.html"> Documentation Index </a> ]
<h1> WSO2 Governance Registry - User Guide </h1>

<h2 id="ResourcesUI"> Resources User Interface </h2>
<p>In the navigator, under Registry, click <strong>Resources</strong>.</p>
<p><img src="../images/registry.png" width="744px"/></p>
<p>Figure 1 : Registry User Interface </p>
<h3>Components of Registry User Interface</h3>

<ul>
  <li><a href="#Breadcrumb">Breadcrumb</a>:- Shows the current directory
    hierarchy </li>
  <li><a href="#Meta">Meta Data</a>:- Shows meta data for the
    resource/collection </li>
  <li><a href="#Properties">Properties</a>:- Shows properties for the
    resource/collection </li>
  <li><a href="#Content">Content</a>:- Shows the contents of the
    resource/collection </li>
  <li><a href="#Permissions">Permissions</a>:- Provides the user interface to change permissions and roles</li>
  <li><a href="#TagsW">Tags</a>:- Provides the user interface to add/view tags of a resource or collection </li>
  <li><a href="#SearchW">Search</a>:- Allows to perform a simple tag search</li>
  <li><a href="#RatingsW">Ratings</a>:- Provides the user interface to set/view ratings of a resource or collection</li>
  <li><a href="#CommentsW">Comments</a>:- Provides the user interface to add/view comments of a resource or collection</li>
  <li><a href="#Retention">Retention</a>:- Provides the user interface to manage retention for resources</li>
  <li><a href="#Associations">Dependencies and Associations</a>:- Provides the user interface to add/view dependencies and associations</li>
  <li><a href="#media-types">Media Types</a>:- Provides the user interface to manage media types of resources and collections</li>
</ul>

<h3><a name="Breadcrumb" id="Breadcrumb">Resource Breadcrumb</a></h3>
<p>Use the breadcrumb to navigate backward in the current branch of the
  directory path, by clicking on a directory name in the breadcrumb. Note
  that you can access the root of the directory path by clicking the Home
  icon in the breadcrumb. </p>
<p><img src="../images/breadcrumb.png" width="279px"/></p>
<p>Figure 2: The Breadcrumb </p>
<h3><a name="Meta" id="Meta">Meta Data Panel</a></h3>
<p>The meta data panel displays the following properties of the resource
  or the collection </p>

<ul>
  <li>Created Time and Author </li>
  <li>Last Updated Time and Author </li>
  <li>Media Type </li>
  <li>URL for the permanent link </li>
  <li>Versions of the resource </li>
  <li>Description about the resource/collection. </li>
</ul>

<p><img src="../images/metadata.png" width="492px"/></p>
<p>Figure 3 : The meta data panel </p>
<h3><a name="Properties" id="Properties">Properties Panel</a></h3>
<p>This panel displays the properties of the currently selected resource
or collection. New properties can be added, while existing properties can
be edited or deleted. </p>
<p></p>
<p><img src="../images/properties.png" width="492px"/></p>
<p>Figure 4 : The properties panel </p>
<h3><a name="Content" id="Content">Content Panel</a></h3>
<p>If the currently selected entity is a collection, the Content Panel
  shows the child entries under that collection. It provides details of each
  entry. An entry can be either another collection or a resource. </p>

<ul>
  <li>Name - Click to access the content of this entry </li>
  <li>Created Date </li>
  <li>Author </li>
  <li>Ratings</li>
  <li>The link to the Atom feed </li>
</ul>

<p><img src="../images/entries.png" width="492px"/></p>
<p>Figure 5 : View of Directory Entries </p>
<strong>Adding a new Resource</strong>
<p>Adding a resource could be done for a collection of resources or for an
  individual resource. To add a collection or directory, click on the "Add resource"/"Add collection" link
  provided and a page will be presented to fill in the required information.
  Optionally, a description can be included for the resource in question.When adding resources and collection we restrict
  following characters [~!@#$;%^*+={}\|&lt;&gt;"',] to be in the names of resources/collections.</p>

<p>Note : Adding and deleting resources within the registry are considered version operations. Therefore, provision is made to rollback or restore a resource to any previous version. 		Refer Versions for additional information on this topic.</p>

<strong>Deleting a Resource</strong>
<p>To delete a resource, click on the cylindric icon provided. However, upon
  doing so a resource will not be removed from the database but instead marked
  as deleted. This provides the opportunity to restore a previously deleted
  resource.</p>
<p>If the currently selected entity is a resource, the Content panel
  provides a user interface through which you can display, edit and
  download the content.</p>
<p><img src="../images/content.png" width="492px"/></p>
<p>Figure 6 : View of the Content </p>
<h3><a name="Permissions" id="Permissions">Permissions</a></h3>
<p>Using the following screen, WSO2 Governance Registry permissions can be assigned to different roles and individual users. The top half of the permission's screen is used to define user roles and the bottom half for defining role permissions.</p>
<p><img src="../images/permissions.png" width="492px"/></p>
<p>Figure 7 : Permissions </p>
<p>To assign permissions to users or roles follow the steps given below:</p>

<ol>
  <li>select user/role from User/Role drop down</li>
  <li>choose an action from the 'Action' drop down menu</li>
  <li>select permission type. users are able to choose 'Allow' or 'Deny' by selecting appropriate option button.</li>
  <li>Click 'Add Permission' to apply selection</li>
</ol>

<p>Existing permissions can be changed by selecting and clearing the check boxes  for required permissions and clicking the "Apply All Permissions" button.</p>
<p><b>Note:</b> 'Deny' permissions have higher priority over 'Allow' permissions. Essentially, this means that a 'Deny' permission always overrides an 'Allow' permission assigned to a role.</p>
<p>The right side of the resources page houses several additional blocks, such as: Search, Tags, Comments and Ratings.</p>
<h3><a name="TagsW" id="TagsW">Tags</a></h3>
<p>Provides space to enter tags for a given resource. These tags can be used when searching for a resource as key words for search criteria.</p>
<p>Users can enter as many tags as they like provided individual tags are separated by commas and a given tag is not used by the same author to identify the same resource repeatedly.</p>
<p>Added tags can be deleted by clicking on the delete icon that appears when hovering over a tag.</p>
<p><img src="../images/tag-widget.png" width="279px"/></p>
<p> Figure 8 : Tags </p>
<h3><a name="SearchW" id="SearchW">Search</a></h3>
<p> Users can perform a "tag" search using the search block. To perform an advanced search, in the navigator, under Registry, click <strong>Search</strong>.</p>
<p><img src="../images/search-widget.png" width="279px"/></p>
<p> Figure 9 : Search </p>
<h3><a name="RatingsW" id="RatingsW">Ratings</a></h3>
<p>Users can either rate or view ratings made by others using the ratings block.</p>
<p><img src="../images/ratings-widget.png" width="279px"/></p>
<p> Figure 10 : Ratings </p>
<h3><a name="CommentsW" id="CommentsW">Comments</a></h3>
<p>Users can either comment or refer comments made by others using the comments block.</p>
<p>To add a new comment:</p>

<p>1. select the &quot;Add Comment&quot; located on the comments block</p>
<p>2. enter comment in the text box provided</p>
<p>3. click the 'Add' button to continue.</p>
<p><img src="../images/comments-widgets.png" width="279px"/></p>
<p> Figure 11 : Comments </p>
<p>Added comments can be deleted by clicking on the delete icon.</p>

<h3><a name="Retention" id="Retention">Retention</a></h3>
<p>Users can define a duration for which they can prevent other users from making changes or deleting a resource. To setup retention, you need to specify a date range for which the retention would be effective. You then need to select the operation(s) for which you'd be setting up the restrictions. Once a resource is locked, it can only be unlocked by the user who created.</p>
<p><img src="../images/retention.png" width="279px"/></p>
<p> Figure 12 : Retention </p>
<h3><a name="Associations"> Dependencies and Associations </a></h3>
<p>Resources or collections stored in the Registry can be associated according to the user's requirements. These can either be dependencies or named custom associations.</p>
<p><img src="../images/associations.png" width="279px"/></p>
 <p> Figure 13 : Associations and Dependencies </p>
<h3><a name="media-types"> Media Types </a></h3>
<p>
Each collection or resource that you create and store on the repository has an associated media
type. However, you also have the option to leave this unspecified enforcing the default media type.
There are two main ways in which you can configure media types for resources.
</p>

<p>
The first method is by means of a one-time configuration which can be done by modifying the
<strong>mime.types</strong> file found in the server configuration directory. This can be done just
once before the initial start-up of the server. The second method is to configure the media types
via the server administration console.
</p>

<p>
Managing media types for resources can be done via the server administration console, by editing the
properties of the <strong>/_system/config/repository/components/org.wso2.carbon.governance/media-types/index</strong> collection. This collection contains two
resources, <strong>collection</strong> and <strong>custom.ui</strong>. To manage media types of
collections and custom user interfaces, you need to edit the properties of these two resources.
</p>

<p><img src="../images/edit_mime_types.png" width="800"/></p>
<p> Figure 14 : Managing media types </p>

<h3><a name="creating-gar">Creating a Governance Archive</a></h3>
<p>
WSO2 Governance Registry only allows you to upload one resource at a time. However, a WSDL
(or Schema) file can have several imported resources (Schemas and WSDLs) that are required to be
uploaded all at once. To address this, you now can create a zipped-archive of the WSDL (or Schema)
file you want to upload including the imported Schemas and WSDLs placed in a proper directory
structure. As an example, let's upload the WSDL file found at
<a href="http://131.107.153.205/SoapWsdl_BaseDataTypes_XmlFormatter_Service_Indigo/BaseDataTypesDocLitB.svc?wsdl">
http://131.107.153.205/SoapWsdl_BaseDataTypes_XmlFormatter_Service_Indigo/BaseDataTypesDocLitB.svc?wsdl</a>
</p>

<p>
<strong>Step 1:</strong>
Save the WSDL to your local file system (by the name <code>BaseDataTypesDocLitB.svc.wsdl</code>)
to a folder named, <strong>myWSDL</strong>.
</p>

<p>
<strong>Step 2:</strong>
You need to open the WSDL file and identify the directory structure of the imports. The WSDL
file we use has absolute Schema locations. Therefore, we first of all need to make them relative.
</p>

<p>
<strong>Step 3:</strong>
We will replace the Schema locations to reflect a relative directory structure. Replace
<code>http://131.107.153.205/SoapWsdl_BaseDataTypes_XmlFormatter_Service_Indigo/BaseDataTypesDocLitB.svc?xsd=xsd1</code>
with <code>schemas/xsd1.xsd</code>. Similarly replace the other two locations as,
<code>schemas/xsd0.xsd</code> and <code>schemas/xsd2.xsd</code>.
</p>

<p>
<strong>Step 4:</strong>
Create a folder named <strong>schemas</strong> inside the folder <strong>myWSDL</strong>.
Now, save the three Schemas, within the <strong>schemas</strong> folder. Save
<a href="http://131.107.153.205/SoapWsdl_BaseDataTypes_XmlFormatter_Service_Indigo/BaseDataTypesDocLitB.svc?xsd=xsd0">
http://131.107.153.205/SoapWsdl_BaseDataTypes_XmlFormatter_Service_Indigo/BaseDataTypesDocLitB.svc?xsd=xsd0</a>
as <code>xsd0.xsd</code>,
<a href="http://131.107.153.205/SoapWsdl_BaseDataTypes_XmlFormatter_Service_Indigo/BaseDataTypesDocLitB.svc?xsd=xsd1">
http://131.107.153.205/SoapWsdl_BaseDataTypes_XmlFormatter_Service_Indigo/BaseDataTypesDocLitB.svc?xsd=xsd1</a>
as <code>xsd1.xsd</code>, and
<a href="http://131.107.153.205/SoapWsdl_BaseDataTypes_XmlFormatter_Service_Indigo/BaseDataTypesDocLitB.svc?xsd=xsd2">
http://131.107.153.205/SoapWsdl_BaseDataTypes_XmlFormatter_Service_Indigo/BaseDataTypesDocLitB.svc?xsd=xsd2</a>
as <code>xsd2.xsd</code>.
</p>

<p>
<strong>Step 5:</strong>
You then need to open each Schema file and fix the locations of the imported Schemas. The
Schema files we have uses absolute Schema locations, and we need to make them relative as well.
</p>

<p>
<strong>Step 6:</strong>
Open xsd1.xsd, and replace
<code>http://131.107.153.205/SoapWsdl_BaseDataTypes_XmlFormatter_Service_Indigo/BaseDataTypesDocLitB.svc?xsd=xsd0</code>
with <code>xsd0.xsd</code>, and <code>http://131.107.153.205/SoapWsdl_BaseDataTypes_XmlFormatter_Service_Indigo/BaseDataTypesDocLitB.svc?xsd=xsd2</code>
with <code>xsd2.xsd</code>. Then, open xsd2.xsd and do the same changes.
</p>

<p>
<strong>Step 7:</strong>
Save and close the WSDL and Schema files, if you haven't done so. Then, create a zip archive
of the folder <strong>myWSDL</strong>. Lets say you named it <strong>myZIP.zip</strong>. Now change
the extension of this file from <strong>.zip</strong> to <strong>.gar</strong>. Your file should now
have the name, <strong>myZIP.gar</strong>.
</p>

<p>
<strong>Step 8:</strong>
Upload the <strong>myZIP.gar</strong> to the registry, through the 'Browse' sub menu under
the 'Resources' menu. Now, you should see your WSDL listed under the 'WSDLs' section under the 'List'
sub-menu of the 'Metadata' menu.
</p>

<p>
To upload a Schema file (with imports), you need to follow the above mentioned steps starting from
Step 4. You can should save the <strong>base schema file</strong> outside the
<strong>schemas</strong> folder. This is just as the same as saving the base WSDL file. Also, if you
are importing a WSDL that imports other WSDLs, you need to place the imported WSDLs in a folder
named <strong>wsdls</strong>.
</p>

<p>
Governance Archives can be used to upload multiple base WSDLs (and Schemas) at the same
time. This can be done by placing all the base WSDLs and base Schemas at the top-level folder, and
including the others inside folders named, <strong>schemas</strong> and <strong>wsdls</strong> as
appropriate.
</p>

<h3><a name="adding-link">Adding an External Link</a></h3>
<p>
WSO2 Governance Registry allows you to add external links (hyperlinks) as resources in the registry.
To add such a link, you need to create a text resource with the media type,
<strong>application/vnd.wso2-hyperlink</strong> and specify the URL as the resource's content    
</p>

<h3><a name="adding-profile">Adding a User Profile</a></h3>
<p>
To add a user profile to the registry, you need to create custom content by the media type,
<strong>application/vnd.wso2-profiles+xml</strong> and provide the user name.
</p>

<p><img src="../images/add_profile.png" width="480"/></p>
<p> Figure 15 : Adding profiles </p>
</body>

</html>
