<?xml version="1.0" encoding="ISO-8859-1"?>

<!--
  ~  Copyright (c) 2005-2008, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
  ~
  ~  WSO2 Inc. licenses this file to you under the Apache License,
  ~  Version 2.0 (the "License"); you may not use this file except
  ~  in compliance with the License.
  ~  You may obtain a copy of the License at
  ~
  ~    http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~  Unless required by applicable law or agreed to in writing,
  ~  software distributed under the License is distributed on an
  ~  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~  KIND, either express or implied.  See the License for the
  ~  specific language governing permissions and limitations
  ~  under the License.
  ~
  -->

<!DOCTYPE html
   PUBLIC "-//W3C//DTD XHTML 1.1//EN"
   "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd" >

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title> WSO2 Governance Registry - User Guide </title>
<link href="../css/greg-docs.css" rel="stylesheet"/>
<link href="../styles/dist-docs.css" rel="stylesheet" type="text/css" media="all"/>
</head>
<body>
[ <a href="../docs_index.html"> Documentation Index </a> ]
<h1> WSO2 Governance Registry - User Guide </h1>

<h2 id="check-in-client">Check-in Client</h2>
<p>
Check-in Client is a tool that you can use to replicate the resources tree in the Governance Registry into your
file-system or to a dump file. Much like a version control system like Subversion, you can do checkout, check-in and update
operations using this tool.
</p>
<p>
When you are checking out, you can specify which path of the collection tree should checkout and where in the local
file-system checkout to. And you can give more options to make it more flexible as described in the following sections.
</p>
<p>
The tool basically functions in two modes.
</p>
<ol>
    <li>
        <p>
            Replicating the Registry to a file structure (The Default):
        </p>
        <p>
            In this mode the collections in the registry are mapped to directories/folders and non-collections are mapped
            to files. Once you checkout the registry to the file system, you can edit existing files, delete existing
            files or directories and add new files and directories and then you can check-in them back to the registry.
            This will enable you to navigate and work with more familiar file system. Specially when you have to import lot of
            files to a collection, it will be easy to checkout that collection to a local directory, copy the required
            files to that directory and commit it back.
        </p>
    </li>
    <li>
        <p>
            Replicating the Registry to a dump file(with -f option):
        </p>
        <p>
            In this mode the resource tree (from a path specified) will be dumped to a single file. You are not supposed
            to edit this files to do any changes. Rather you can use this mode to get backups\restore and possibly move
            a resource tree from one registry to another as an alternative to doing a remote mounting and moving.
        </p>
    </li>
</ol>

<h3 id="check-in-commands">The Commands Overview</h3>
<p>
Check-in Client should be used with either check-in, checkout or update commands. Here is a description about each of these
commands.
</p>
      <table border="1px">
          <tbody>
              <tr class="title">
                  <td>
                      The Command
                  </td>
                  <td>
                      A description about the command
                  </td>
              </tr>
              <tr>
                  <td>
                      co or checkout
                  </td>
                  <td>
                      <p>
                      You can use this command to check out a registry path to the local file system or to a single dump file.
                      </p>
                      <p>
                      If you are checking out a local registry (which you have to set GREG_HOME path) just provide the path. Examples:
                      </p>
                      <ul>
                          <li>
                             Example 1 of urls: "/"
                          </li>
                          <li>
                             Example 2 of urls: "/path1"
                          </li>
                      </ul>
                      <p>
                      If you are checking out a remote registry provide the registry url followed by the path.
                      </p>
                      <ul>
                          <li>
                             Example 3 of urls: "https://localhost:9443/registry"
                          </li>
                          <li>
                             Example 4 of urls: "https://localhost:9443/registry/path1"
                          </li>
                      </ul>
                      <p>
                      <em>
                        Note that when you are checking out to the file system, the file/directory names will have the url encoded value of the
                        corresponding resource name. For an example space will be converted into '+' character and ':' will be converted into "%3A" (without quotes) 
                        character sequence. This was done to eliminate the possibility that some resource names are not supported to be set as names of files/directories
                        of some file systems (under some operating systems).
                      </em>
                      </p>
                  </td>
              </tr>
              <tr>
                  <td>
                      ci or check-in
                  </td>
                  <td>
                      <p>
                      You can use this command to check-in (commit) to the registry from a dump file or from the file system (an existing checkout or a new directory structure). 
                      If you are committing a dump file, then you should provide a path or path prefixed by registry url just
                      after the check-in command.
                      If you are committing a file system you can provide a url of a registry followed by the command to commit it back to a particular location,
                      or you don't need to provide any url if you want to check-in it to the same location where you got the checkout.
                      </p>
                      <p>
                      <em>
                      Note: If you are check-in a file which has spaces in its name, the tool will correctly check-in to a resource with the same name (containing spaces), but it
                      will create a replicate file back in the file system with the name you get after replacing spaces with '+' character and you are asked to delete 
                      the original one.
                      </em>
                      </p>
                  </td>
              </tr>
              <tr>
                  <td>
                      up or update
                  </td>
                  <td>
                      <p>
                      You can use this command to update an already committed local file system. This command is not available
                      if you have checked out to a dump file, as it can be updated using the checkout command itself.
                      </p>
                  </td>
              </tr>
          </tbody>
      </table>

<h3 id="check-in-options">The Options Overview</h3>
<p>
Here are the possible options with examples on how to use it.
</p>
<table border="1px">
    <tbody>
        <tr class="title">
           <td>
              Options
           </td>
            <td>
               Overview
            </td>
        </tr>
        <tr>
           <td>
                -u &lt;username&gt;
           </td>
            <td>
                The username of the login to the registry. This is a required option as you can't login anonymously from
                checking client
            </td>
        </tr>
        <tr>
           <td>
                -p &lt;password&gt;
           </td>
            <td>
                The password of the login to the registry.
            </td>
        </tr>
        <tr>
           <td>
                -l &lt;location&gt;
           </td>
            <td>
                The directory or file to check-in. The commands will be executed relative to the directory that you 
                are currently in using the location specified by this option. If you have not used this option, the
                working directory will be the same as the directory that the command is executed.
            </td>
        </tr>
        <tr>
           <td>
                -f &lt;filename&gt;
           </td>
            <td>
                Filename to dump (if you are checking out) or restore from (if you are checking in).
            </td>
        </tr>
        <tr>
           <td>
                -t &lt;type&gt;
           </td>
            <td>
                The registry type to be used "atom" or "ws".
            </td>
        </tr>
        <tr>
           <td>
                -h
           </td>
            <td>
                Displays the help screen.
            </td>
        </tr>
    </tbody>
</table>

<h2 id="check-in-running">Running Check-in Client</h2>
<p>
You have to run the checkin-client.sh in linux or checkin-client.bat in windows to run the check-in client.
</p>

<h3 id="check-in-examples">Examples</h3>
<p>
    Here are some examples of using check-in client. Note that here I'm running the checkin-client.bat in windows. If you
    are on linux, you have to use checkin-client.sh instead. For the username and the password, I'm using "admin" "admin".
    Please replace them with your username and password when you are trying these commands.
</p>


<table border="1px">
    <tbody>
        <tr class="title">
           <td>
              Sample Scenario
           </td>
            <td>
              Command to run
            </td>
        </tr>
        <tr>
           <td>
                Checking out a root collection from a remote registry running on https://localhost:9443 to the current working directory.
           </td>
            <td>
                checkin-client.bat co https://localhost:9443/registry/ -u admin -p admin_pw
            </td>
        </tr>
        <tr>
           <td>
                Checking out a root collection from the local registry to the current working directory. (You should set the GREG_HOME
               environment variable to the registry you are referring)
           </td>
            <td>
                checkin-client.bat co / -u admin -p admin_pw
            </td>
        </tr>
        <tr>
           <td>
                Checking in a collection from the current working directory back to the registry which it check out (This command
               is independent of whether it is checked out from a local registry or a remote registry. It will anyway commit
               it back to where it is checked out from).
           </td>
            <td>
                checkin-client.bat ci / -u admin -p admin_pw
            </td>
        </tr>
        <tr>
           <td>
                Update an already checkout location
           </td>
            <td>
                checkin-client.bat co / -u admin -p admin_pw
            </td>
        </tr>

        <tr>
           <td>
                Dump a remote registry root to a file (Note that additional -f option)
           </td>
            <td>
                checkin-client.bat co https://localhost:9443/registry/ -u admin -p admin_pw -f remote.dump
            </td>
        </tr>

        <tr>
           <td>
                Restore a dump file to a remote registry root. Note that here you have to provide the url with the "ci"
               command.
           </td>
            <td>
                checkin-client.bat ci https://localhost:9443/registry/ -u admin -p admin_pw -f remote.dump
            </td>
        </tr>

        <tr>
           <td>
                Dump the local registry root to a file.
           </td>
            <td>
                checkin-client.bat co / -u admin -p admin_pw -f local.dump
            </td>
        </tr>

        <tr>
           <td>
                Restore a dump file to a local registry root.
           </td>
            <td>
                checkin-client.bat ci / -u admin -p admin_pw -f local.dump
            </td>
        </tr>
        <tr>
           <td>
                Copy entire tree from /path1 to /path2 using check-in client. (This can be done through 'copy' command too)
           </td>
            <td>
                <div>
                checkin-client.bat co /path1 -u admin -p admin_pw -f temp.dump
                </div>
                <div>
                checkin-client.bat ci /path2 -u admin -p admin_pw -f temp.dump
                </div>
            </td>
        </tr>
        <tr>
           <td>
                Copy entire tree from G-Reg1 (runs on 9443 port) to G-Reg2 (runs on 9444 port) using check-in client.
           </td>
            <td>
                <div>
                checkin-client.bat co https://localhost:9443/registry/ -u admin -p admin_pw -f temp.dump
                </div>
                <div>
                checkin-client.bat ci https://localhost:9444/registry/ -u admin -p admin_pw -f temp.dump
                </div>
            </td>
        </tr>
    </tbody>
</table>


</body>

</html>
