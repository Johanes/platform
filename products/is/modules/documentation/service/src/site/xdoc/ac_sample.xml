<!--
 ~ Copyright (c) 2005-2010, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
 ~
 ~ WSO2 Inc. licenses this file to you under the Apache License,
 ~ Version 2.0 (the "License"); you may not use this file except
 ~ in compliance with the License.
 ~ You may obtain a copy of the License at
 ~
 ~    http://www.apache.org/licenses/LICENSE-2.0
 ~
 ~ Unless required by applicable law or agreed to in writing,
 ~ software distributed under the License is distributed on an
 ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 ~ KIND, either express or implied.  See the License for the
 ~ specific language governing permissions and limitations
 ~ under the License.
 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
        "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=iso-8859-1"/>
    <title>Welcome to WSO2 Identity Server v2.0.0!</title>
    <link href="css/is-docs.css" rel="stylesheet"/>
   </head>
<body>
<h2>Access Control Demonstration Sample</h2>


<p>Use following steps to try out the sample</p>

<h3>Step 1 : Create users</h3>

<p>The Identity Provider of WSO2 Identty Solution is based on 
<a href="http://wso2.org/projects/wsas/java">WSO2 Web Services Application 
Server (WSAS)</a>. The WSAS instance used by the Identity Provider can be 
accessed using the "wsas" context.</p>

<p>https://localhost:12443/wsas</p>

<p>First log into WSAS management console (default admin
user name is "admin" and password is "admin") and create a user account with 
the role "user".

Now use the "Security" option in WSAS to create a user ("alice") with the role
"user".

 </p>


<h3>Step 2 : Change user store</h3>
 <p>
 Now log into the "Identity Provider management console" 
 (default admin user name is "admin" and password is "admin") and set 
 "wsasRealmForAccessControlSample" user store configuration as the default user
 store in "User Stores" configuration.
 </p>

<h3>Step 3 : Define claims</h3>

<p>
Now since we changed the user store the enabled claims and claim mappings will 
have to be set.
</p>

<p>Enable "http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname"
claim.</p>
<p>http://schemas.xmlsoap.org/ws/2005/05/identity/claims/privatepersonalidentifier
claim is enabled by default.</p>

<p>Now in the "WSO2 Claims" add a new claim with following details :</p>

<ul>
<li>Claim URI : http://identity.wso2.org/claims/roles</li>
<li>Display Tag : Roles</li>
<li>Description : WSAS user roles</li>
</ul>

<p>Enable "http://identity.wso2.org/claims/roles" claim</p>

<h3>Step 4 : Map claims</h3>

<p>Use the "Claim Mappings" configuration to map claims to user properties as 
listed below : </p>

<table>
<tr><th>Claim URI</th><th>User property</th></tr>
<tr><td>http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname</td><td>username</td></tr>
<tr><td>http://identity.wso2.org/claims/roles</td><td>roles</td></tr>
</table>



<h3>Step 5 : Login to the user application and obtain a card</h3>

<p>Log into the "Identity Provider" with the user credentials created in "Step 1"
, download an information card and install it in your identity selector. 
</p>

<h3>Step 6 : Try the access control application</h3>
<p>
Point the browser to the sample access control demo relying party available in 
the "ac" context of the identity provider container.
</p>
<p>https://localhost:12443/ac/</p>
.
<p>
Use the information card "alice" obtained earlier to log into this application.
The web app will display that the user is not an admin user.</p>

<p>Now add "admin" role to "alice" using "WSAS management 
console" and log into the application again. Now since "alice" has the 
"admin" role the application will recognize "alice" as an admin user.</p>

</body>
</html>